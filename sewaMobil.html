<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Formulir Pembeli</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
</head>
<body>
    <style>
      .background-vid {
      position: fixed;
      top: 0;
      left: 0;
      min-width: 100%;
      min-height: 100%;
      object-fit: cover;
      z-index: -1;
    }

#page {
 position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.85); 
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: all 0.3s ease;
}

#container {
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
}

#h3 {
  color: white;
}

#ring {
  width: 190px;
  height: 190px;
  border: 1px solid transparent;
  border-radius: 50%;
  position: absolute;
}

#ring:nth-child(1) {
  border-bottom: 8px solid rgb(255, 141, 249);
  animation: rotate1 2s linear infinite;
}

@keyframes rotate1 {
  from {
    transform: rotateX(50deg) rotateZ(110deg);
  }

  to {
    transform: rotateX(50deg) rotateZ(470deg);
  }
}

#ring:nth-child(2) {
  border-bottom: 8px solid rgb(255,65,106);
  animation: rotate2 2s linear infinite;
}

@keyframes rotate2 {
  from {
    transform: rotateX(20deg) rotateY(50deg) rotateZ(20deg);
  }

  to {
    transform: rotateX(20deg) rotateY(50deg) rotateZ(380deg);
  }
}

#ring:nth-child(3) {
  border-bottom: 8px solid rgb(0,255,255);
  animation: rotate3 2s linear infinite;
}

@keyframes rotate3 {
  from {
    transform: rotateX(40deg) rotateY(130deg) rotateZ(450deg);
  }

  to {
    transform: rotateX(40deg) rotateY(130deg) rotateZ(90deg);
  }
}

#ring:nth-child(4) {
  border-bottom: 8px solid rgb(252, 183, 55);
  animation: rotate4 2s linear infinite;
}

@keyframes rotate4 {
  from {
    transform: rotateX(70deg) rotateZ(270deg);
  }

  to {
    transform: rotateX(70deg) rotateZ(630deg);
  }
}



@keyframes dashArray {
  0% {
    stroke-dasharray: 0 1 359 0;
  }

  50% {
    stroke-dasharray: 0 359 1 0;
  }

  100% {
    stroke-dasharray: 359 1 0 0;
  }
}

@keyframes spinDashArray {
  0% {
    stroke-dasharray: 270 90;
  }

  50% {
    stroke-dasharray: 0 360;
  }

  100% {
    stroke-dasharray: 270 90;
  }
}

@keyframes dashOffset {
  0% {
    stroke-dashoffset: 365;
  }

  100% {
    stroke-dashoffset: 5;
  }
}

@keyframes spin {
  0% {
    rotate: 0deg;
  }

  12.5%,
  25% {
    rotate: 270deg;
  }

  37.5%,
  50% {
    rotate: 540deg;
  }

  62.5%,
  75% {
    rotate: 810deg;
  }

  87.5%,
  100% {
    rotate: 1080deg;
  }
}

.confirmation-card {
            max-width: 600px;
            margin: 20px auto;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        .confirmation-header {
            background-color: #0d6efd;
            color: white;
            border-radius: 10px 10px 0 0;
        }
        .car-img {
            border-radius: 8px;
            height: 180px;
            object-fit: cover;
        }
        .is-invalid {
            border-color: #dc3545;
        }
        .invalid-feedback {
            color: #dc3545;
            font-size: 0.875em;
            display: none;
        }
        .was-validated .form-select:invalid ~ .invalid-feedback,
        .was-validated .form-select:invalid ~ .invalid-tooltip {
            display: block;
        }
    </style>
    <!-- background video -->
    <video class="background-vid" autoplay loop muted>
    <source src="assets/13820717_960_540_30fps.mp4" type="video/mp4"/>
  </video>
  <div class="container py-4">
        <!-- Form Pemesanan (Sederhana) -->
        <div class="confirmation-card card mb-4" style="background: rgba(115, 115, 115, 0.3); margin-top: 15%;">
            <div class="card-body">
              <div class="gif" style="display: flex; justify-content: center; margin: 0 auto;">
              <script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>
<dotlottie-player src="https://lottie.host/29a439f8-e581-4f46-b20e-c76e6cf4eeab/fzWEwbfOtA.lottie" background="transparent" speed="1.5" style="width: 300px; height: 300px" loop autoplay></dotlottie-player>
</div>
                <h4 class="card-title mb-4 text-white">Form Penyewaan Mobil</h4>
                <form id="rentalForm" class="needs-validation" novalidate>
                    <div class="mb-3">
                        <label for="carSelect" class="form-label text-white">Pilih Mobil</label>
                        <select class="form-select" id="carSelect" required>
                            <option value="" selected disabled>Pilih merk mobil</option>
                            <option value="Toyota Innova">Toyota Innova</option>
                            <option value="Mitsubishi Pajero">Mitsubishi Pajero</option>
                            <option value="Mini Cooper">Mini Cooper</option>
                        </select>
                        <div class="invalid-feedback">
                            Silakan pilih merk mobil (5-20 karakter)
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="pickupDate" class="form-label text-white">Tanggal Ambil</label>
                            <input type="date" class="form-control" id="pickupDate" required>
                            <div class="invalid-feedback">
                                Silakan isi tanggal ambil
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label for="returnDate" class="form-label text-white">Tanggal Kembali</label>
                            <input type="date" class="form-control" id="returnDate" required>
                            <div class="invalid-feedback">
                                Silakan isi tanggal kembali
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-primary w-100" onclick="validateForm()">
                        Lihat Konfirmasi
                    </button>
                </form>
            </div>
        </div>

        <!-- Modal Konfirmasi -->
        <div class="modal fade" id="confirmationModal" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <!-- Header -->
                    <div class="confirmation-header modal-header">
                        <h5 class="modal-title">Konfirmasi Penyewaan</h5>
                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                    </div>
                    
                    <!-- Body -->
                    <div class="modal-body">
                        <!-- Info Mobil -->
                        <div class="row mb-3">
                            <div class="col-md-5">
                                <img src="https://via.placeholder.com/300x200?text=Toyota+Avanza" class="car-img w-100" id="confirmCarImage">
                            </div>
                            <div class="col-md-7">
                                <h5 id="confirmCarName">Toyota Avanza</h5>
                                <p><i class="fas fa-users text-muted"></i> <span id="confirmCarSeats">7</span> Penumpang</p>
                                <p><i class="fas fa-gas-pump text-muted"></i> <span id="confirmCarFuel">Bensin</span></p>
                            </div>
                        </div>

                        <!-- Detail Sewa -->
                        <div class="border-top pt-3">
                            <h6>Detail Penyewaan</h6>
                            <div class="row">
                                <div class="col-6">
                                    <small>Ambil:</small>
                                    <p id="confirmPickupDate">15 Jun 2023, 10:00</p>
                                </div>
                                <div class="col-6">
                                    <small>Kembali:</small>
                                    <p id="confirmReturnDate">20 Jun 2023, 10:00</p>
                                </div>
                            </div>
                        </div>

                        <!-- Rincian Biaya -->
                        <div class="border-top pt-3">
                            <h6>Rincian Biaya</h6>
                            <table class="table table-sm">
                                <tr>
                                    <td><span id="rentalDays">5</span> hari x <span id="dailyPrice">Rp400.000</span></td>
                                    <td class="text-end" id="basePrice">Rp2.000.000</td>
                                </tr>
                                <tr>
                                    <td>Asuransi</td>
                                    <td class="text-end" id="insuranceCost">Rp150.000</td>
                                </tr>
                                <tr class="fw-bold">
                                    <td>Total</td>
                                    <td class="text-end" id="totalPrice">Rp2.150.000</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Footer -->
                    <div class="modal-footer">
                        <button class="btn btn-outline-secondary" data-bs-dismiss="modal">Ubah</button>
                        <button class="btn btn-primary" onclick="processPayment()">Bayar Sekarang</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- loading -->
<div id="page">
        <div id="container">
            <div id="ring"></div>
            <div id="ring"></div>
            <div id="ring"></div>
            <div id="ring"></div>
            <div id="h3">SewaMobilku</div>
        </div>

<script>
  // loading
  window.addEventListener('load', function() {
    setTimeout(function() {
      const loader = document.getElementById('page');
      if (loader) {
        loader.classList.add('d-none');
      }
    }, 2000); 
  });
  // list mobil
        const cars = {
            "Toyota Innova": {
                image: "assets/homePagecar2.jpg",
                seats: "7",
                fuel: "Bensin",
                price: 400000
            },
            "Mitsubishi Pajero": {
                image: "assets/homePagecar1.jpg",
                seats: "5",
                fuel: "Bensin",
                price: 350000
            },
            "Mini Cooper": {
                image: "assets/homePagecar3.jpg",
                seats: "7",
                fuel: "Bensin",
                price: 450000
            },
        };
// validasi form mobil
        function validateForm() {
            const form = document.getElementById('rentalForm');
            const carSelect = document.getElementById('carSelect');
            
            if (carSelect.value === "" || carSelect.value.length < 5 || carSelect.value.length > 20) {
                carSelect.classList.add('is-invalid');
                return;
            } else {
                carSelect.classList.remove('is-invalid');
            }
            
            if (!form.checkValidity()) {
                form.classList.add('was-validated');
                return;
            }
            
            showConfirmation();
        }
// konfirmasi
        function showConfirmation() {
            const carSelect = document.getElementById('carSelect');
            const pickupDate = document.getElementById('pickupDate');
            const returnDate = document.getElementById('returnDate');
            
            const selectedCar = carSelect.value;
            const carInfo = cars[selectedCar];
  // pentotalan data pesanan
            const startDate = new Date(pickupDate.value);
            const endDate = new Date(returnDate.value);
            const diffTime = Math.abs(endDate - startDate);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
  // opsi tanggal berapa mau diambil dan tanggal berapa mau dikembalikan
            const options = { day: 'numeric', month: 'short', year: 'numeric' };
            const pickupDateStr = startDate.toLocaleDateString('id-ID', options);
            const returnDateStr = endDate.toLocaleDateString('id-ID', options);
  // nominal harga
            const basePrice = diffDays * carInfo.price;
            const insurance = 150000;
            const totalPrice = basePrice + insurance;
            
            const formatRupiah = (number) => {
                return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(number);
            };
    // modal konfirmasi pembayaran
            document.getElementById('confirmCarImage').src = carInfo.image;
            document.getElementById('confirmCarName').textContent = selectedCar;
            document.getElementById('confirmCarSeats').textContent = carInfo.seats;
            document.getElementById('confirmCarFuel').textContent = carInfo.fuel;
            document.getElementById('confirmPickupDate').textContent = pickupDateStr + ", 10:00";
            document.getElementById('confirmReturnDate').textContent = returnDateStr + ", 10:00";
            document.getElementById('rentalDays').textContent = diffDays;
            document.getElementById('dailyPrice').textContent = formatRupiah(carInfo.price);
            document.getElementById('basePrice').textContent = formatRupiah(basePrice);
            document.getElementById('insuranceCost').textContent = formatRupiah(insurance);
            document.getElementById('totalPrice').textContent = formatRupiah(totalPrice);
            
            const modal = new bootstrap.Modal(document.getElementById('confirmationModal'));
            modal.show();
        }
// proses pembayaran + kehalaman awal
        function processPayment() {
            alert('Pembayaran berhasil diproses! Terima kasih telah menyewa dengan kami.');
            document.getElementById('rentalForm').reset();
            document.getElementById('rentalForm').classList.remove('was-validated');
            const modal = bootstrap.Modal.getInstance(document.getElementById('confirmationModal'));
            modal.hide();
            window.location.href = 'index.html';
        }
</script>
<!-- bootstrapjs + ajax  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
</body>
</html>